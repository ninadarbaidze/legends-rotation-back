generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}



model WeeklyRotation {
  id Int @id @default(autoincrement())
  initialState InitialState?
  waves Waves[]

}

model InitialState {
  id Int @id @default(autoincrement())
  author String
  date String
  version String
  weeklyModifier String
  initialClasses InitialClasses[]
  weeklyRotation WeeklyRotation @relation(fields: [weeklyRotationId], references: [id])
  weeklyRotationId Int @unique

}

model InitialClasses {
  id Int @id @default(autoincrement())
  classId Int
  title String
  image String
  color String
  initialState InitialState @relation(fields: [initialStateId], references: [id])
  initialStateId Int
}

model Waves {
  id Int @id @default(autoincrement())
  weeklyRotation WeeklyRotation? @relation(fields: [initialStateId], references: [id])
  initialStateId Int
  spawn1 Spawn1?
  spawn2 Spawn2?
  spawn3 Spawn3?
}

model Spawn1 {
  id Int @id @default(autoincrement())
  spawnLocation String
  objective String?
  spawnOneClasses SpawnOneClasses[]
  actions Action[]
  wave Waves @relation(fields: [waveId], references: [id])
  waveId Int  @unique
}
model Spawn2 {
  id Int @id @default(autoincrement())
  spawnLocation String
  objective String? 
  spawnTwoClasses SpawnTwoClasses[]
  actions Action[]
  wave Waves @relation(fields: [waveId], references: [id])
  waveId Int  @unique
}

model Spawn3 {
  id Int @id @default(autoincrement())
  spawnLocation String
  objective String?
  spawnThreeClasses SpawnThreeClasses[]
  actions Action[]
  wave Waves @relation(fields: [waveId], references: [id])
  waveId Int @unique
}

model Action {
  id Int @id @default(autoincrement())
  name String
  spawn1   Spawn1? @relation(fields: [spawn1Id], references: [id])
  spawn1Id Int
  spawn2   Spawn2? @relation(fields: [spawn2Id], references: [id])
  spawn2Id Int
  spawn3   Spawn3? @relation(fields: [spawn3Id], references: [id])
  spawn3Id Int
}

model SpawnOneClasses {
  id Int @id @default(autoincrement())
  classId Int
  spawn1 Spawn1 @relation(fields: [spawn1Id], references: [id])
  spawn1Id Int
}
model SpawnTwoClasses {
  id Int @id @default(autoincrement())
  classId Int
  spawn2 Spawn2 @relation(fields: [spawn2Id], references: [id])
  spawn2Id Int 
}
model SpawnThreeClasses {
  id Int @id @default(autoincrement())
  classId Int
  spawn3 Spawn3? @relation(fields: [spawn3Id], references: [id])
  spawn3Id Int
}
